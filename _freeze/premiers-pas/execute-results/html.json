{
  "hash": "2a0c6c2419ec44779f85e44c88a5f698",
  "result": {
    "engine": "knitr",
    "markdown": "# Premiers pas\n\nNous allons plonger progressivement dans la découverte de R en combinant des éléments du langage _et_ les bonnes pratiques à adopter dès le départ.\n\n## La console\nQuand vous ouvrez R (ou RStudio), vous êtes nez à nez avec un \"invite de commande\" et un curseur :\n\n```\n> \n```\n\n![R, canal historique](images/Rterminal.png)\n\nR attend que vous tapiez des commandes avec vos jolis doigts et que vous pressiez `<Entrée>` pour exécuter la commande. Le résultat s'affiche alors :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1+1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n:::\n\n\nUne commande _combinée_ peut se dérouler sur plusieurs lignes comme on le verra plus tard (typiquement lors de la définition d'une fonction ou d'un _pipe_ de fonctions) mais quand vous pressez `<Entrée>` l'ensemble de ces commandes doit être syntaxiquement correct, sinon une erreur vous sera retournée.\n\nVous pouvez également taper plusieurs commandes _indépendantes_ sur la même ligne, séparées par  `;` mais je vous le déconseille.\n\nVous pouvez **naviguer dans votre historique** de commandes avec les touches `<Haut>` et `<Bas>` de votre clavier. Vous pouvez aussi **effacer** votre console (sans effacer l'historique) avec `<Ctrl>+L` ou `<Cmd>+L` sous Mac.\n\n## RStudio\nSi vous êtes dans RStudio, vous aurez remarqué plusieurs fenêtres dont l'une est la **Console** de R (en bas à gauche sur la capture d'écran) que nous venons de voir, ainsi qu'une autre, généralement au dessus, dans laquelle vous pouvez ouvrir des **Scripts** au format `.R`, c'est à dire en fichier texte.\n\nVous aurez remarqué que dans le panneau \"Console\", le même texte de \"bienvenue\" apparaît et c'est normal : après tout, RStudio n'est ni plus ni moins qu'une console avec des outils autour. \n\nVous pouvez parfaitement tout faire dans le panneau \"Console\" et ne pas utiliser le reste si vous chérissez l'ambiance des années 1990s. Mais à ce compte là, utilisez plutôt RGui, c'est à dire ce que nous avons vu précédemment. RGui tout seul n'a plus vraiment de sens dans la vie quotidienne actuelle de l'analyse de données.\n\nVous pouvez aller faire un tour dans les **Préférences** de RStudio et en paramétrer l'aspect, notamment pour avoir un fond sombre et ne pas abimer vos jolis yeux.\n\n![L'interface de RStudio](images/Rstudio.png)\nPour le moment, nous n'allons utiliser que la console de RStudio, nous découvrirons le reste un tout petit peu plus tard.\n\n\n\n## Arithmétique\nEn premier lieu, R est une calculette. Vous pouvez copier-coller les blocs de code directement dans votre console R :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# back to school\n1+2\n3-4\n2/3\n2*2\n\n# beyond +, -, /, *\n2^4 \nsqrt(9) # equivalent to 9^(1/2)\n7%%3\n\n# precedence rules apply\n(1.5-2)*4\n1.5-2*4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n[1] -1\n[1] 0.6666667\n[1] 4\n[1] 16\n[1] 3\n[1] 1\n[1] -2\n[1] -6.5\n```\n\n\n:::\n:::\n\n\nTous les opérateurs arithmétiques courants sont disponibles :\n\n* `+`, `-`, `*`, `/` pour l'arithmétique de base\n* `^` pour élever au carré et `sqrt` pour la racine carrée\n* `%%` pour le [modulo](https://fr.wikipedia.org/wiki/Modulo_(opération)), etc.\n\n## Fonctions : découverte\n\nVous venez d'utiliser - peut-être sans le savoir -, votre première _fonction_ : `sqrt`, pour _square root_. Les fonctions ont souvent des noms explicites et sont, généralement, suivies de parenthèses dans lesquelles glisser une ou des valeurs. \n\nEn réalité, toutes les opérations ci-dessus sont des fonctions, y compris un banal `+`[^fonctions]. Nous y reviendrons mais cela nous vaut la première maxime de sagesse populaire à garder dans un coin de la tête :\n\n> En R, tout est fonction.\n\n[^fonctions]: essayez donc  `` `+`(1, 2) ``\n\nVous pouvez également utiliser des parenthèses pour \"emboiter\" des opérations dans le bon ordre. Sans parenthèses, les règles de précédence[^precedence] classiques s'appliquent comme dans l'exemple ci-dessus : une multiplication sera calculée avant une addition.\n\n[^precedence]: voir `?Syntax`\n\n## Variables et assignation (1)\n\nComme on pouvait s'en douter, R a une mémoire et c'est donc plus qu'une _calculette_ : c'est une _calculatrice_.\n\nPour stocker une valeur dans une **variable** nous utilisons l'opérateur d'**assignation** : `<-`[^fonctions2]\n\n[^fonctions2]: ``  `<-`(toto, 4); toto*2 `` puisqu'on vous dit que tout est fonction !\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplop <- 3\nplop^2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 9\n```\n\n\n:::\n:::\n\n\nD'autres opérateurs d'assignation existent (`->`, `=`, `<<-`, etc.) mais je vous conseille - calmement mais fermement - de vous en tenir au bon vieux `<-`[^assignation].\n\n[^assignation]: L'assignation `->` est acceptable dans certains contextes, notamment en combinaison avec un pipe `%>%`. `=` est plutôt réservés aux arguments de fonctions ou, éventuellement, à des méta-paramètres en début de script. `<<-` est en revanche proscrit car il assigne dans l'environnement global. Utilisé dans une fonction, il remplacera dans l'environnement global la valeur de cette variable, si elle existe. Si vous pensez en avoir besoin, c'est généralement (>99.9%) que votre script/fonction est mal fichue.\n\nNaturellement, si vous assignez une nouvelle valeur à une variable, celle-ci est remplacée :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplop <- 2\nplop+3\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5\n```\n\n\n:::\n:::\n\n\nEt bien entendu vous pouvez combiner les variables :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplip <- 7\nplop*plip\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 14\n```\n\n\n:::\n:::\n\n\nVous pouvez lister les variables existantes avec la fonction `ls()`. L'onglet \"Environnement\" dans RStudio permet aussi de les visualiser, plus convivialement et de façon plus détaillée.\n\nPour afficher la valeur d'une variable, et plus généralement d'un objet, il suffit de taper son nom dans la console et d'appuyer sur `<Entrée>`. En coulisses, R appelle alors automatiquement la fonction `print`. \n\nR a tendance à faire beaucoup de choses en coulisses. Dans l'ensemble, cela se traduit par un caractère raisonnablement intuitif pour vous. Sachez simplement qu'une opération aussi naturelle qu'une assignation à la volée comme on vient de le faire est une hérésie pour un esprit informaticien orthodoxe, habitué à déclarer une variable et son type _avant_ d'y assigner une valeur.\n\n## Bien nommer ses variables\n\n> Mal nommer les choses c'est ajouter au malheur du monde -- Albert Camus\n\n> There are only two hard things in Computer Science: cache invalidation and naming things. -- Phil Karlton\n\nÀ propos du nommage de vos variables, soyez explicites mais compacts et évitez : les caractères spéciaux, les majuscules, les points (utilisez `_`) et les noms réservés comme `pi`.\n\nJe vous conseille l'anglais, même approximatif, partout et tout le temps (commentaires, noms de variables, etc.).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# good names\nmod1\nmod1_spain\nN_perm\n\n# bad names\nmy.model # . is for methods\nMY_MODEL # calm down\nMy_Model # Camel Case works but not favoured\nmy_model_after_lda_a_and_data_subset2_flavourB # headaches and typos garanteed\n\n# invalid or error-prone names\n34_data \npi <- 4    # works but very bad idea\nprint <- 2 # same\n&italy\n```\n:::\n\n\n## Variables et assignation (2)\n\nPour assigner plus d'une valeur à une variable, la fonction `c`, pour _concatenate_, est votre amie : \n\n\n::: {.cell}\n\n```{.r .cell-code}\ntoto <- c(1, 2, 3, 4, 5)\ntoto*2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  2  4  6  8 10\n```\n\n\n:::\n:::\n\n\nJusqu'ici toutes les variables assignées étaient des _scalaires_, c'est à dire des variables ne comprenant qu'une valeur unique.\n\n`toto` n'est pas un scalaire mais un _vecteur_ de nombres, qui peut s'écrire en ligne, c'est à dire en une seule et unique _dimension_. Je pose ça là, nous y reviendrons bien vite.\n\nQuelques fonctions bien utiles pour visualiser et décrire des variables en R :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(toto) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5\n```\n\n\n:::\n\n```{.r .cell-code}\nhead(toto, 2) # show the first 2 values\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2\n```\n\n\n:::\n\n```{.r .cell-code}\ntail(toto, 3) # show the last 3 values\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3 4 5\n```\n\n\n:::\n:::\n\n\nNous voyons que certaines fonctions acceptent plus d'une seule valeur au sein de leurs parenthèses : on parle d'**argument**. Quand plus d'un seul argument est **passé** à une fonction, on les sépare par des virgules. Certaines fonctions peuvent/doivent aussi être appelées à vide, comme on l'a vu avec `ls()`.\n\n## Séquences régulières\n\nVous m'avez vu (me) taper \"à la main\", des séries de nombres telles que `c(1, 2, 3, 4, 5)`. On constate une certaine régularité dans cette séquence des premiers entiers naturels.\n\nJusqu'à 5, on peut imaginer la taper à la main, mais imaginons que nous ayons besoin d'aller jusqu'à 100 ou même à 37427. Doit bien y avoir quelqu'un·e qui a pensé à une fonction pour faire ça non ? Ceci nous amène à une double maxime, peut-être les deux plus importantes de toute cette formation.\n\n> Si tu penses que tu es en train de faire quelque chose de répétitif et/ou stupide, il existe à coup sûr une façon plus intelligente de faire\n\nDe façon plus compacte :\n\n> Un·e bon·ne programmeur·se est une grosse feignasse\n\nR possède toutes les fonctions dont on peut rêver pour générer séquences régulières et nombres aléatoires.\n\nCommençons par les séquences régulières et la versatile fonction `seq` qui prend au minimum deux arguments, deux options, pour le point de départ et le point d'arrivée :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseq(1, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1]  1  2  3  4  5  6  7  8  9 10\n```\n\n\n:::\n:::\n\n\nGénérér une séquence d'entiers naturels est une opération si banale en programmation que l'on peut faire encore pus court avec l'opérateur `:`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1:5\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2 3 4 5\n```\n\n\n:::\n\n```{.r .cell-code}\n-1:4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] -1  0  1  2  3  4\n```\n\n\n:::\n:::\n\n\nDe la même façon, vous pouvez répéter une ou des valeurs avec `rep` :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntonton <- 1:5\nrep(tonton, 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] 1 2 3 4 5 1 2 3 4 5\n```\n\n\n:::\n\n```{.r .cell-code}\nrep(tonton, each=3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5\n```\n\n\n:::\n:::\n\n\nÀ ce point de votre existence, vous devriez vous poser les questions suivantes :\n\n* faut-il se rappeler de tout ça ?\n* ces histoires de paramètres de fonction, attends... ah oui, le Monsieur a dit d'apeller ça des _arguments_, c'est bien joli mais on les trouve où ?\n* et d'ailleurs il doit bien y avoir une documentation quelque part pour tout ce bazar ?\n* quand est-ce qu'on fait une pause ?\n\nR, comme tout langage de programmation, possède sa documentation. Tout est documenté et en premier lieu les fonctions. Nous y arrivons bientôt mais parlons d'abord plus en détail des _fonctions_.\n\n## Interlude clavier et RStudio\n\n* Toutes les commandes tapées depuis l'ouverture de R/RStudio sont dans votre console. Pour l'effacer, pressez `<Ctrl> + <L>`. Vos objets sont conservés.\n* Pour naviguer dans votre historique, côté console, pressez les flèches `<Haut>` et `<Bas>`.\n* Pour compléter un nom de fonction ou d'argument, pressez `<Tab>`\n* Une fois que vous avez la fonction qui vous intéresse, positionnez-vous au sein de ses parenthèses et pressez `<Tab>` de nouveau : la liste des arguments apparaît avec la portion de doc consacrée.\n* Dans RStudio, allez à peu près tout tester dans le menu `Code`. Vous y trouverez des fonctions très utiles (\"Reindent lines\", \"Reformat code\" par exemple). À droite de la commande se trouve aussi les raccourcis clavier. Utilisez-les !\n\n## Résumé\n\nBravo : vous venez de mettre le premier orteil dans le monde merveilleux de R !\n\nVous savez désormais :\n\n* utiliser la console de R(Studio) ;\n* faire des calculs de base ;\n* les assigner dans des variables, bien nommées ;\n* créer des séquences régulières de nombres.\n\nNous allons continuer sur notre lancée combinant découvertes et bonnes pratiques, en parlant de reproductibilité et de scripts, de documentation des fonctions, d'écriture de vos propres fonctions et nous allons enrichir votre vocabulaire.\n\n\n\n\n\n",
    "supporting": [
      "premiers-pas_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}